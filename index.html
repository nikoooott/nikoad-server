<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>NikoAd ‚Äî –†–µ–∫–ª–∞–º–∞ –≤ Telegram</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #6a0dad, #12005e);
    color: #f0f0f5;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }

  h1 {
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
    letter-spacing: 2px;
  }

  .channels {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    max-width: 900px;
    margin-bottom: 40px;
  }

  .channel-card {
    background: #2e005e;
    border-radius: 12px;
    padding: 20px;
    width: 220px;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(106, 13, 173, 0.5);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .channel-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 8px 25px rgba(106, 13, 173, 0.8);
  }

  .channel-name a {
    font-weight: 700;
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: #bf94ff;
    text-decoration: none;
  }
  .channel-name a:hover {
    text-decoration: underline;
  }

  .subscribers {
    font-size: 0.9rem;
    margin-bottom: 10px;
    color: #b0a9e6;
  }

  .btn-show {
    align-self: flex-start;
    background: #8a2be2;
    border: none;
    border-radius: 8px;
    padding: 8px 14px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.25s ease;
  }

  .btn-show:hover {
    background: #bf94ff;
  }

  /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    right:0;
    bottom: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .modal.active {
    display: flex;
  }

  .modal-content {
    background: #210044;
    border-radius: 16px;
    padding: 30px 40px;
    max-width: 500px;
    width: 90%;
    color: #e3dbff;
    box-shadow: 0 6px 30px rgba(106, 13, 173, 0.8);
    position: relative;
    overflow-y: auto;
    max-height: 80vh;
  }

  .modal-close {
    position: absolute;
    top: 12px;
    right: 16px;
    background: #8a2be2;
    border: none;
    border-radius: 50%;
    width: 32px;
    height: 32px;
    color: white;
    font-weight: 700;
    cursor: pointer;
    font-size: 20px;
    line-height: 28px;
    text-align: center;
    transition: background-color 0.3s ease;
  }
  .modal-close:hover {
    background: #bf94ff;
  }

  .modal-header {
    font-weight: 700;
    font-size: 1.8rem;
    margin-bottom: 20px;
  }

  .stat-item {
    margin-bottom: 12px;
    font-size: 1rem;
  }
  .stat-item span {
    font-weight: 700;
    color: #bf94ff;
  }

  /* –§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ */
  form {
    background: #2e005e;
    max-width: 700px;
    width: 100%;
    border-radius: 14px;
    padding: 25px 30px;
    box-shadow: 0 6px 20px rgba(106, 13, 173, 0.7);
    display: flex;
    flex-direction: column;
    margin-top: auto;
  }

  form input, form textarea, form select {
    background: #3c007d;
    border: none;
    border-radius: 10px;
    padding: 12px 14px;
    margin-bottom: 15px;
    font-size: 1rem;
    color: #eee;
    resize: vertical;
    transition: background-color 0.3s ease;
  }

  form input::placeholder,
  form textarea::placeholder {
    color: #b0a9e6;
  }

  form input:focus, form textarea:focus, form select:focus {
    outline: none;
    background-color: #5a00bc;
  }

  form button {
    background: #8a2be2;
    border: none;
    border-radius: 10px;
    padding: 15px;
    font-size: 1.1rem;
    font-weight: 700;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  form button:hover {
    background: #bf94ff;
  }

  #status {
    margin-top: 10px;
    min-height: 22px;
    font-weight: 700;
    color: #8efc8e;
  }

  /* –ê–¥–∞–ø—Ç–∏–≤ */
  @media (max-width: 600px) {
    .channels {
      flex-direction: column;
      align-items: center;
    }

    .channel-card {
      width: 90%;
    }

    form {
      padding: 20px;
    }
  }
</style>
</head>
<body>

<h1>NikoAd ‚Äî –†–µ–∫–ª–∞–º–∞ –≤ Telegram</h1>

<div class="channels" id="channels">
  <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ -->
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
<div class="modal" id="modal">
  <div class="modal-content">
    <button class="modal-close" id="modalClose">&times;</button>
    <div class="modal-header" id="modalTitle"></div>
    <div id="modalStats"></div>
  </div>
</div>

<form id="orderForm">
  <input type="text" id="name" name="name" placeholder="–í–∞—à–µ –∏–º—è" required />
  <input type="text" id="tg" name="tg" placeholder="Telegram (@–Ω–∏–∫–Ω–µ–π–º)" required />
  <textarea id="msg" name="msg" placeholder="–¢–µ–∫—Å—Ç —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –ø–æ—Å—Ç–∞" rows="4" required></textarea>

  <label for="duration">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:</label>
  <select id="duration" name="duration" required>
    <option value="24">24 —á–∞—Å–∞ - 1550‚ÇΩ</option>
    <option value="48">48 —á–∞—Å–æ–≤ - 1700‚ÇΩ</option>
    <option value="72">72 —á–∞—Å–∞ - 1900‚ÇΩ</option>
  </select>

  <div style="margin: 10px 0; font-weight: 700; color: #bf94ff;" id="priceCalc">–¶–µ–Ω–∞: 1550‚ÇΩ</div>

  <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
  <div id="status"></div>
</form>

<script>
  const channelsData = [
    {
      id: 'tver',
      name: '–ò—â—É –¢–µ–±—è –¢–≤–µ—Ä—å',
      subs: 10500,
      link: 'https://t.me/ishutebyatverr',
      prices: {24: 1550, 48: 1700, 72: 1900},
      stats: {
        "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏": "10,500",
        "–°—Ä–µ–¥–Ω–∏–π –æ—Ö–≤–∞—Ç –∑–∞ 24 —á–∞—Å–∞": "2,600",
        "–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (ERR)": "26%",
        "–í–æ–∑—Ä–∞—Å—Ç –∫–∞–Ω–∞–ª–∞": "1 –≥–æ–¥ 7 –º–µ—Å—è—Ü–µ–≤"
      }
    },
    {
      id: 'nizhnevartovsk',
      name: '–ò—â—É –¢–µ–±—è –ù–∏–∂–Ω–µ–≤–∞—Ä—Ç–æ–≤—Å–∫',
      subs: 6000,
      link: 'https://t.me/nizhnevartovsk_dtp',
      prices: {24: 1400, 48: 1600, 72: 1800},
      stats: {
        "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏": "6,000",
        "–°—Ä–µ–¥–Ω–∏–π –æ—Ö–≤–∞—Ç –∑–∞ 24 —á–∞—Å–∞": "574",
        "–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (ERR)": "38%",
        "–í–æ–∑—Ä–∞—Å—Ç –∫–∞–Ω–∞–ª–∞": "1 –≥–æ–¥ 5 –º–µ—Å—è—Ü–µ–≤"
      }
    },
    {
      id: 'niko',
      name: 'NIKO üá¶üá≤',
      subs: 3500,
      link: 'https://t.me/nikotver',
      prices: {24: 1000, 48: 1150, 72: 1250},
      stats: {
        "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏": "3,500",
        "–°—Ä–µ–¥–Ω–∏–π –æ—Ö–≤–∞—Ç –∑–∞ 24 —á–∞—Å–∞": "773",
        "–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (ERR)": "247%",
        "–í–æ–∑—Ä–∞—Å—Ç –∫–∞–Ω–∞–ª–∞": "1 –≥–æ–¥ 11 –º–µ—Å—è—Ü–µ–≤"
      }
    },
    {
      id: 'krasnoyarsk',
      name: '–ò—â—É –¢–µ–±—è –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫',
      subs: 3000,
      link: 'https://t.me/ishutebyakrasnoyarsk',
      prices: {24: 800, 48: 1000, 72: 1150},
      stats: {
        "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏": "3,000",
        "–°—Ä–µ–¥–Ω–∏–π –æ—Ö–≤–∞—Ç –∑–∞ 24 —á–∞—Å–∞": "649",
        "–í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å (ERR)": "37%",
        "–í–æ–∑—Ä–∞—Å—Ç –∫–∞–Ω–∞–ª–∞": "1 –≥–æ–¥ 6 –º–µ—Å—è—Ü–µ–≤"
      }
    }
  ];

  const channelsContainer = document.getElementById('channels');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalStats = document.getElementById('modalStats');
  const modalClose = document.getElementById('modalClose');
  const orderForm = document.getElementById('orderForm');
  const priceCalc = document.getElementById('priceCalc');
  const durationSelect = document.getElementById('duration');
  const statusDiv = document.getElementById('status');

  let selectedChannel = null;

  // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —Å—Å—ã–ª–∫–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–∞–º–∏
  channelsData.forEach(channel => {
    const card = document.createElement('div');
    card.className = 'channel-card';
    card.innerHTML = `
      <div class="channel-name"><a href="${channel.link}" target="_blank">${channel.name}</a></div>
      <div class="subscribers">–ü–æ–¥–ø–∏—Å—á–∏–∫–æ–≤: ${channel.subs.toLocaleString()}</div>
      <button class="btn-show">–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
    `;
    card.querySelector('.btn-show').addEventListener('click', () => {
      openModal(channel);
    });
    channelsContainer.appendChild(card);
  });

  // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
  function openModal(channel) {
    selectedChannel = channel;
    modalTitle.textContent = channel.name;
    modalStats.innerHTML = '';
    for (const [key, value] of Object.entries(channel.stats)) {
      const div = document.createElement('div');
      div.className = 'stat-item';
      div.innerHTML = `<span>${key}:</span> ${value}`;
      modalStats.appendChild(div);
    }
    modal.classList.add('active');

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    durationSelect.value = '24';
    updatePrice();
  }

  // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  modalClose.addEventListener('click', () => {
    modal.classList.remove('active');
  });

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã –ø—Ä–∏ —Å–º–µ–Ω–µ –≤—Ä–µ–º–µ–Ω–∏
  durationSelect.addEventListener('change', updatePrice);

  function updatePrice() {
    if (!selectedChannel) return;
    const val = durationSelect.value;
    const price = selectedChannel.prices[val] || 0;
    priceCalc.textContent = `–¶–µ–Ω–∞: ${price}‚ÇΩ`;
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
  orderForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = orderForm.name.value.trim();
    const tg = orderForm.tg.value.trim();
    const msg = orderForm.msg.value.trim();
    const duration = orderForm.duration.value;
    if (!selectedChannel) {
      statusDiv.textContent = '‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.';
      statusDiv.style.color = '#ff8e8e';
      return;
    }

    const price = selectedChannel.prices[duration];

    // –¢–≤–æ–π backend URL
    const backendUrl = 'https://nikoad-server.onrender.com/api/send';

    const data = {
      name,
      tg,
      msg,
      duration,
      channel: selectedChannel.name,
      price
    };

    try {
      const res = await fetch(backendUrl, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
      });
      if (res.ok) {
        statusDiv.textContent = '‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!';
        statusDiv.style.color = '#8efc8e';
        orderForm.reset();
      } else {
        throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
      }
    } catch (err) {
      statusDiv.textContent = '‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.';
      statusDiv.style.color = '#ff8e8e';
    }
  });
</script>

</body>
</html>
